(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,n,t){e.exports=t(390)},140:function(e,n,t){},147:function(e,n,t){},390:function(e,n,t){"use strict";t.r(n);var a=t(4),r=t.n(a),i=t(105),o=t.n(i),c=t(110),l=(t(140),t(107)),s=t(108),u=t(111),g=t(109),d=t(112),f=t(43),p=t(27),h=t(76),m=t.n(h),b="".concat("TICTACTOE","/INIT"),v="".concat("TICTACTOE","/SET_BLOCK_VALUE"),w="".concat("TICTACTOE","/SET_GAME_SCALE"),O="".concat("TICTACTOE","/SET_WINNER_CONDITION"),_="".concat("TICTACTOE","/SET_WINNER"),y="".concat("TICTACTOE","/SET_IS_SINGLE_PLAYER"),S=-1,k=t(37),E=t(38);function C(){var e=Object(k.a)(["\n    .tic-tac-toe__blocks-wrapper {\n        width: ","px;\n        height: ","px;\n        @media only screen and (max-width: 600px) {\n            width: calc(100vw - 20px);\n            height: calc(100vw - 20px);\n        }\n        display: grid;\n        ","\n    }\n    .tic-tac-toe__item {\n        outline: none;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: white;\n        width: 100%;\n        height: 100%;\n\n        background: ",";\n        cursor: pointer;\n        &:hover {\n            background: ",";\n        }\n    }\n    .tic-tac-toe__item-win {\n        animation: "," 0.5s linear infinite alternate;\n    }\n    .tic-tac-toe__cross-wrapper {\n        height: 80%;\n        width: 80%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        .cross {\n            position: relative;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            &:before {\n                ","\n            }\n            &:after {\n                ","\n            }\n        }\n    }\n    \n    .tic-tac-toe__restart-btn {\n        font-family: 'Rammetto One', cursive;\n        width: 100%;\n        line-height: 50px;\n        font-size: 1.5em;\n        letter-spacing: 1px;\n        background: white;\n        cursor: pointer;\n        outline: none;\n        margin: 10px 0;\n        padding: 5px 0;\n        border-radius: 5px;\n        border: none;\n        transition: all 0.25s ease-out;\n        &:hover {\n            box-shadow: 0 10px 20px 0 ",";\n            transform: translateY(-1px);\n            color: ",";\n        }\n    }\n    .tic-tac-toe__setting-group-wrapper {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        grid-template-rows: repeat(2, 40px);\n        justify-content: space-between;\n        font-family: 'Rammetto One', cursive;\n        margin-bottom: 10px;\n    }\n    .tic-tac-toe__setting-group {\n        display: flex;\n        align-items: center;\n        text-shadow: 2px 0px white;\n        font-size: 1.2em;\n        @media only screen and (max-width: 600px) {\n            font-size: 0.9em;\n        }\n        span {\n            margin-right: 5px;\n        }\n        select {\n            font-size: 1.2em;\n            outline: none;\n            background: white;\n        }\n    }\n"]);return C=function(){return e},e}function j(){var e=Object(k.a)(["\n    from {\n        background: ",";\n    }\n\n    to {\n        background: ",";\n    }\n"]);return j=function(){return e},e}var x=Object(E.b)(j(),"#ff4f6e","#ff99ab"),T=function(e,n){return"\n    content: '';\n    border-radius: 10px;\n    width: 110%;\n    background: black;\n    position: absolute;\n    height: ".concat(4.5/e,"em;\n    transform: rotate(").concat(n,"deg);\n")},I=E.a.div(C(),600,600,function(e){var n=e.gameScale;return"\n                grid-template-columns: repeat(".concat(n,", 1fr);\n                grid-template-rows: repeat(").concat(n,", 1fr);\n                grid-gap: ").concat(45/n,"px ").concat(45/n,"px;\n            ")},"#ff99ab","#ff4f6e",x,function(e){var n=e.gameScale;return T(n,45)},function(e){var n=e.gameScale;return T(n,-45)},"#e2a900","#ff4f6e"),N=t(28),R=t(76),P=function(e,n,t){var a={1:[],"-1":[]},r=0;return n.forEach(function(n){var i=[],o=e.getIn([r,"owner"]),c=e.getIn([r,"owner"]);n.forEach(function(n){r=n,c=e.getIn([r,"owner"]),o===c?c?i.push(e.getIn([r,"id"])):i=[]:c?(o&&i.length>=t&&a[o].push(Object(N.a)(i)),(i=[]).push(e.getIn([r,"id"])),o=c):(o&&i.length>=t&&a[o].push(Object(N.a)(i)),i=[],o=c)}),i.length>=t&&a[c].push(Object(N.a)(i))}),a},A=function(e,n,t){var a,r=[],i=!1;return[function(e,n,t){var a=R.range(0,n).map(function(e){return R.range(e*n,(e+1)*n)});return P(e,a,t)}(e,n,t),function(e,n,t){var a=R.range(0,n).map(function(e){return R.range(e,e+n*(n-1)+1,n)});return P(e,a,t)}(e,n,t),function(e,n,t){var a=R.range(0,n),r=R.range(2*n-1,n*n,n),i=a.map(function(e,t){return R.range(e,t*n+1,n-1)}),o=r.map(function(e,t){return R.range(e,e+(r.length-t)*(n-1),n-1)}),c=[].concat(Object(N.a)(i),Object(N.a)(o));return P(e,c,t)}(e,n,t),function(e,n,t){var a=R.range(0,n).sort(function(e,n){return n-e}),r=R.range(n,n*(n-1)+1,n),i=a.map(function(e,t){return R.range(e,(t+1)*n,n+1)}),o=r.map(function(e,t){return R.range(e,e+(r.length-t)*(n+1),n+1)}),c=[].concat(Object(N.a)(i),Object(N.a)(o));return P(e,c,t)}(e,n,t)].forEach(function(e){e[1].length&&(r.push.apply(r,Object(N.a)(e[1])),a=1,i=!0),e[-1].length&&(r.push.apply(r,Object(N.a)(e[-1])),a=-1,i=!0)}),e.find(function(e){return void 0===e.get("owner")})||(i=!0),{winner:a,winCaseArr:r,isGameFinished:i}},W=function(e){return e.get("tictactoe")},G=function(e){return{type:v,payload:e}},z=function(e){return{type:_,payload:e}};function B(){var e=Object(k.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 80%;\n    width: 80%;\n    .circle__circle {\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        border-radius: 100%;\n        ","\n    }\n"]);return B=function(){return e},e}var F=E.a.div(B(),function(e){return"\n                border: ".concat(4.5/e.theme.scaleFactor,"em solid white;\n            ")}),J=function(e){var n=e.theme;return r.a.createElement(F,{theme:n},r.a.createElement("span",{className:"circle__circle"}))};J.defaultProps={theme:null};var L=J;function M(){var e=Object(k.a)(["\n    width: 80%;\n    height: 80%;\n    .cross__cross {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        &:before {\n            ","\n        }\n        &:after {\n            ","\n        }\n    }\n"]);return M=function(){return e},e}var Y=function(e,n){return"\n    content: '';\n    border-radius: 10px;\n    width: 110%;\n    background: black;\n    position: absolute;\n    height: ".concat(4.5/e,"em;\n    transform: rotate(").concat(n,"deg);\n")},U=E.a.div(M(),function(e){return Y(e.theme.scaleFactor,45)},function(e){return Y(e.theme.scaleFactor,-45)}),D=function(e){var n=e.theme;return r.a.createElement(U,{theme:n},r.a.createElement("span",{className:"cross__cross"}))};D.defaultProps={theme:null};var K=D,Q=function(e){var n=e.options,t=e.handleOnSelect;return r.a.createElement("select",{onChange:t},n.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))};function V(){var e=Object(k.a)(["\n    .tic-tac-toe__toggle-switch-btn-container {\n        position: relative;\n        width: 50px;\n        height: 25px;\n        border-radius: 20px;\n        padding: 4px;\n        cursor: pointer;\n        border: 2px solid white;\n        transition: all 0.15s ease-out;        \n        ","\n    }\n    .tic-tac-toe__toggle-switch-btn-circle {\n        position: relative;\n        width: 50%;\n        height: 100%;\n        background: white;\n        top: 50%;\n        transform: translateY(-50%) translateX(100%);\n        border-radius: 100%;\n        right: 0px;\n        transition: all 0.15s ease-out;\n    }\n    .tic-tac-toe__toggle-switch-btn-circle-left {\n        position: relative;\n        width: 50%;\n        height: 100%;\n        background: white;\n        top: 50%;\n        transform: translateY(-50%);\n        border-radius: 100%;\n        right: 0px;\n        transition: all 0.15s ease-out;\n    }\n"]);return V=function(){return e},e}var X=E.a.div(V(),function(e){return e.isSinglePlay?"background: ".concat("#ff4f6e",";"):"background: #878787;"}),$=function(e){var n=e.isSinglePlay,t=e.handleOnToggleSwitchClick,a=n?"tic-tac-toe__toggle-switch-btn-circle":"tic-tac-toe__toggle-switch-btn-circle-left";return r.a.createElement(X,{isSinglePlay:n,onClick:t},r.a.createElement("div",{className:"tic-tac-toe__toggle-switch-btn-container"},r.a.createElement("div",{className:a})))};$.defaultProps={isSinglePlay:!0,handleOnToggleSwitchClick:function(){}};var q=$;function H(){var e=Object(k.a)(["\n    height: ","px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: #ffffff5e;\n    margin: 10px 0px;\n    font-weight: 900;\n    text-shadow: 2px 0px white;\n    .info-board__content-wrapper {\n        height: ","px;\n        width: ","px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    .info-board__label {\n        font-size: 3em;\n        @media only screen and (max-width: 600px) {\n            font-size: 2em;\n        }\n        letter-spacing: 15px;\n        margin: 0px 20px;\n    }\n"]);return H=function(){return e},e}var Z=E.a.div(H(),100,100,100),ee=window.dataLayer||[];function ne(){ee.push(arguments)}ne("js",new Date),ne("config","UA-71624765-2");var te=ne,ae=function(e){var n={scaleFactor:5};return 1===e?r.a.createElement(L,{theme:n}):-1===e?r.a.createElement(K,{theme:n}):null},re=function(e){var n=e.currentRole,t=e.isWin;if(t.get("isGameFinished")){if(t.get("winner")){var a=1===t.get("winner")?"CIRCLE":"CROSS";return te("event","InfoBoard",{event_category:"".concat(a," win"),event_label:t.get("winCaseArr").toJS()}),r.a.createElement(Z,null,r.a.createElement("span",{className:"info-board__label"},"\u83b7\u80dc\u8005\u662f"),r.a.createElement("div",{className:"info-board__content-wrapper"},ae(t.get("winner"))))}return te("event","InfoBoard",{event_category:"\u5e73\u624b",event_label:t.get("winCaseArr").toJS()}),r.a.createElement(Z,null,r.a.createElement("span",{className:"info-board__label"},"\u5e73\u624b"))}return r.a.createElement(Z,null,r.a.createElement("span",{className:"info-board__label"},"\u8f6e\u5230"),r.a.createElement("div",{className:"info-board__content-wrapper"},ae(n)))};re.defaultProps={currentRole:1,isWin:null};var ie=re,oe=function(e,n){var t=!1;return n.size&&n.forEach(function(n){n.includes(e)&&(t=!0)}),t?"tic-tac-toe__item tic-tac-toe__item-win":"tic-tac-toe__item"},ce=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(g.a)(n)).call.apply(e,[this].concat(r)))).handleOnClick=function(e){var n=t.props,a=n.blocks,r=n.handleOnBlockClicked,i=e.currentTarget.getAttribute("data-id");a.getIn([i,"owner"])||(te("event","onClick Block",{event_category:"id",event_label:i}),r(i))},t.handleOnGameScaleSelected=function(e){var n=t.props.handleOnSetGameScale,a=parseInt(e.target.value,10);te("event","Selection",{event_category:"gameScale",event_label:a}),n(a)},t.handleOnWinnerConditionSelected=function(e){var n=t.props.handleOnSetWinnerCondition,a=parseInt(e.target.value,10);te("event","Selection",{event_category:"winnerCondition",event_label:a}),n(a)},t.handleOnToggleSwitchClick=function(){var e=t.props,n=e.isSinglePlay,a=e.handleOnSetIsSinglePlay;te("event","ToggleSwitch",{event_category:"isSinglePlay",event_label:!n}),a()},t.handleOnRestartClick=function(){var e=t.props.handleOnRestartGame;te("event","restart"),e()},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.gameScale,a=n.blocks,i=n.isWin,o=n.isSinglePlay,c=n.currentRole,l=n.winnerConditionOptions,s=m.a.range(3,21);return r.a.createElement(I,{gameScale:t},r.a.createElement(ie,{currentRole:c,isWin:i}),r.a.createElement("div",{className:"tic-tac-toe__blocks-wrapper"},a.map(function(n){return r.a.createElement("div",{key:n.get("id"),"data-id":n.get("id"),className:oe(n.get("id"),i.get("winCaseArr")),onClick:i.get("isGameFinished")?function(){}:e.handleOnClick},function(e,n){var t={scaleFactor:n};return 1===e?r.a.createElement(L,{theme:t}):-1===e?r.a.createElement(K,{theme:t}):null}(n.get("owner"),t))})),r.a.createElement("button",{className:"tic-tac-toe__restart-btn",onClick:this.handleOnRestartClick},"Restart"),r.a.createElement("div",{className:"tic-tac-toe__setting-group-wrapper"},r.a.createElement("div",{className:"tic-tac-toe__setting-group"},r.a.createElement("span",null,"Scale"),r.a.createElement(Q,{options:s,handleOnSelect:this.handleOnGameScaleSelected})),r.a.createElement("div",{className:"tic-tac-toe__setting-group"},r.a.createElement("span",null,"Condition"),r.a.createElement(Q,{options:l,handleOnSelect:this.handleOnWinnerConditionSelected})),r.a.createElement("div",{className:"tic-tac-toe__setting-group"},r.a.createElement("span",null,"Single Play"),r.a.createElement(q,{isSinglePlay:o,handleOnToggleSwitchClick:this.handleOnToggleSwitchClick}))))}}]),n}(r.a.Component);ce.defaultProps={gameScale:3,blocks:Object(p.List)(),currentRole:0,isWin:Object(p.Map)(),isSinglePlay:!0,gameScaleOptions:[],winnerConditionOptions:[],handleOnBlockClicked:function(){},handleOnRestartGame:function(){},handleOnSetGameScale:function(){},handleOnSetWinnerCondition:function(){},handleOnSetIsSinglePlay:function(){}};var le=Object(f.b)({gameScale:Object(f.a)(W,function(e){return e.get("gameScale")}),blocks:Object(f.a)(W,function(e){return e.get("blocks")}),currentRole:Object(f.a)(W,function(e){return e.get("currentRole")}),isWin:Object(f.a)(W,function(e){var n=e.get("blocks"),t=e.get("winnerCondition"),a=e.get("gameScale"),r=A(n,a,t);return Object(p.fromJS)(r)}),isSinglePlay:Object(f.a)(W,function(e){return e.get("isSinglePlayer")}),gameScaleOptions:Object(f.a)(W,function(e){return m.a.range(3,21)}),winnerConditionOptions:Object(f.a)(W,function(e){var n=e.get("gameScale");return m.a.range(3,n+1)})}),se=Object(c.b)(le,function(e){return{handleOnBlockClicked:function(n){return e(G(n))},handleOnRestartGame:function(){return e({type:b})},handleOnSetGameScale:function(n){return e({type:w,payload:n})},handleOnSetWinnerCondition:function(n){return e({type:O,payload:n})},handleOnSetIsSinglePlay:function(){return e({type:y})}}})(ce),ue=t(126),ge=t.n(ue),de=(t(147),function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(se,null),r.a.createElement(ge.a,{size:80,bannerColor:"#ff4f6e",href:"https://github.com/whjin/make-react-game",target:"_blank"}))}}]),n}(a.Component)),fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var he=t(127),me=t.n(he)()(),be=t(80),ve=t(128),we=Object(p.fromJS)({gameScale:3,winnerCondition:3,blocks:null,currentRole:1,isSinglePlayer:!0,isWin:{winner:"",winCaseArr:[],isGameFinished:!1}});var Oe=function(e){var n=e.get("isSinglePlayer"),t=e.get("gameScale"),a=e.get("winnerCondition")>t?3:e.get("winnerCondition"),r=Object(p.fromJS)(Array.from(new Array(t*t),function(e,n){return{id:n,owner:e}}));return e.set("isSinglePlayer",n).set("currentRole",1).set("blocks",r).set("isWin",Object(p.fromJS)(A(r,t,a))).set("winnerCondition",a)},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b:return Oe(e);case v:var t=n.payload,a=e.get("currentRole");return e.setIn(["blocks",t,"owner"],a).set("currentRole",a*S);case w:var r=e.set("gameScale",n.payload);return Oe(r);case O:var i=e.set("winnerCondition",n.payload);return Oe(i);case _:return e.set("isWin",Object(p.fromJS)(n.payload));case y:return e.updateIn(["isSinglePlayer"],function(e){return!e});default:return Oe(we)}};var ye=t(129),Se=t(393),ke=t(394),Ee=t(84),Ce=[function(e,n){return e.ofType(v).switchMap(function(){var e=n.value.get("tictactoe"),t=e.get("blocks"),a=e.get("winnerCondition"),r=e.get("gameScale"),i=A(t,r,a);return Ee.Observable.of(z(i))})},function(e,n){return e.ofType(_).debounceTime(300).switchMap(function(){var e=n.value.get("tictactoe");if(e.get("isSinglePlayer")&&-1===e.get("currentRole")&&!e.getIn(["isWin","isGameFinished"])){var t=function(e){var n=e.filter(function(e){return void 0===e.get("owner")});return n.get(Math.floor(Math.random()*n.size)).get("id")}(e.get("blocks"));return Ee.Observable.of(G(t))}return Ee.Observable.empty()})},function(e,n){return e.ofType(y).switchMap(function(){var e=n.value.get("tictactoe"),t=A(e.get("blocks"));return Ee.Observable.of(z(t))})}],je=Object(N.a)(Ce);var xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&arguments[1],new ye.BehaviorSubject(Se.a.apply(void 0,Object(N.a)(je)))),t=Object(ke.a)(),a=[t],r=[be.a.apply(void 0,a)],i=be.c,o=Object(be.d)(Object(ve.combineReducers)({tictactoe:_e}),Object(p.fromJS)(e),i.apply(void 0,r));return t.run(function(e,t,a){return n.mergeMap(function(n){return n(e,t,a).catch(function(e,n){return setTimeout(function(){throw e},0),n})})}),o}({},me);o.a.render(r.a.createElement(c.a,{store:xe},r.a.createElement(de,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/make-react-game",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/make-react-game","/service-worker.js");fe?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):pe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):pe(e)})}}()}},[[131,1,2]]]);
//# sourceMappingURL=main.3904b812.chunk.js.map